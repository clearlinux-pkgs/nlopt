#
# This file is auto-generated. DO NOT EDIT
# Generated by: autospec.py
#
Name     : nlopt
Version  : 2.6.1
Release  : 18
URL      : https://github.com/stevengj/nlopt/archive/v2.6.1/nlopt-2.6.1.tar.gz
Source0  : https://github.com/stevengj/nlopt/archive/v2.6.1/nlopt-2.6.1.tar.gz
Summary  : nonlinear optimization library
Group    : Development/Tools
License  : LGPL-2.1 MIT zlib-acknowledgement
Requires: nlopt-data = %{version}-%{release}
Requires: nlopt-lib = %{version}-%{release}
Requires: nlopt-license = %{version}-%{release}
BuildRequires : buildreq-cmake
BuildRequires : guile-dev
BuildRequires : octave-dev
BuildRequires : python3
BuildRequires : python3-dev

%description
An implementation of the algorithm AGS to solve constrained nonlinear
programming problems with Lipschitzian functions. AGS was introduced
by prof. R.G. Strongin (see R. G. Strongin, D. L. Markin,
,Minimization of multiextremal functions under nonconvex constraints,
Cybernetics 22(4), 486-493. Translated from Russian. Consultant
Bureau. New York, 1986.). The method exploits Peano-type curve to
reduce dimension of the source bounded multidimensional constrained
NLP problem and then solves a univariate one.

%package data
Summary: data components for the nlopt package.
Group: Data

%description data
data components for the nlopt package.


%package dev
Summary: dev components for the nlopt package.
Group: Development
Requires: nlopt-lib = %{version}-%{release}
Requires: nlopt-data = %{version}-%{release}
Provides: nlopt-devel = %{version}-%{release}
Requires: nlopt = %{version}-%{release}

%description dev
dev components for the nlopt package.


%package lib
Summary: lib components for the nlopt package.
Group: Libraries
Requires: nlopt-data = %{version}-%{release}
Requires: nlopt-license = %{version}-%{release}

%description lib
lib components for the nlopt package.


%package license
Summary: license components for the nlopt package.
Group: Default

%description license
license components for the nlopt package.


%prep
%setup -q -n nlopt-2.6.1
pushd ..
cp -a nlopt-2.6.1 buildavx2
popd

%build
export http_proxy=http://127.0.0.1:9/
export https_proxy=http://127.0.0.1:9/
export no_proxy=localhost,127.0.0.1,0.0.0.0
export LANG=C
export SOURCE_DATE_EPOCH=1555258324
mkdir -p clr-build
pushd clr-build
export CFLAGS="$CFLAGS -O3 -falign-functions=32 -fno-math-errno -fno-semantic-interposition -fno-trapping-math "
export FCFLAGS="$CFLAGS -O3 -falign-functions=32 -fno-math-errno -fno-semantic-interposition -fno-trapping-math "
export FFLAGS="$CFLAGS -O3 -falign-functions=32 -fno-math-errno -fno-semantic-interposition -fno-trapping-math "
export CXXFLAGS="$CXXFLAGS -O3 -falign-functions=32 -fno-math-errno -fno-semantic-interposition -fno-trapping-math "
%cmake ..
make  %{?_smp_mflags}
popd
mkdir -p clr-build-avx2
pushd clr-build-avx2
export CFLAGS="$CFLAGS -O3 -falign-functions=32 -fno-math-errno -fno-semantic-interposition -fno-trapping-math -march=haswell "
export FCFLAGS="$CFLAGS -O3 -falign-functions=32 -fno-math-errno -fno-semantic-interposition -fno-trapping-math -march=haswell "
export FFLAGS="$CFLAGS -O3 -falign-functions=32 -fno-math-errno -fno-semantic-interposition -fno-trapping-math -march=haswell "
export CXXFLAGS="$CXXFLAGS -O3 -falign-functions=32 -fno-math-errno -fno-semantic-interposition -fno-trapping-math -march=haswell "
export CFLAGS="$CFLAGS -march=haswell -m64"
export CXXFLAGS="$CXXFLAGS -march=haswell -m64"
%cmake ..
make  %{?_smp_mflags}
popd

%check
export LANG=C
export http_proxy=http://127.0.0.1:9/
export https_proxy=http://127.0.0.1:9/
export no_proxy=localhost,127.0.0.1,0.0.0.0
cd clr-build; make test
cd ../clr-build-avx2;
make test || :

%install
export SOURCE_DATE_EPOCH=1555258324
rm -rf %{buildroot}
mkdir -p %{buildroot}/usr/share/package-licenses/nlopt
cp COPYING %{buildroot}/usr/share/package-licenses/nlopt/COPYING
cp src/algs/ags/COPYRIGHT %{buildroot}/usr/share/package-licenses/nlopt/src_algs_ags_COPYRIGHT
cp src/algs/bobyqa/COPYRIGHT %{buildroot}/usr/share/package-licenses/nlopt/src_algs_bobyqa_COPYRIGHT
cp src/algs/cobyla/COPYRIGHT %{buildroot}/usr/share/package-licenses/nlopt/src_algs_cobyla_COPYRIGHT
cp src/algs/direct/COPYING %{buildroot}/usr/share/package-licenses/nlopt/src_algs_direct_COPYING
cp src/algs/esch/COPYRIGHT %{buildroot}/usr/share/package-licenses/nlopt/src_algs_esch_COPYRIGHT
cp src/algs/luksan/COPYRIGHT %{buildroot}/usr/share/package-licenses/nlopt/src_algs_luksan_COPYRIGHT
cp src/algs/newuoa/COPYRIGHT %{buildroot}/usr/share/package-licenses/nlopt/src_algs_newuoa_COPYRIGHT
cp src/algs/slsqp/COPYRIGHT %{buildroot}/usr/share/package-licenses/nlopt/src_algs_slsqp_COPYRIGHT
cp src/algs/stogo/COPYRIGHT %{buildroot}/usr/share/package-licenses/nlopt/src_algs_stogo_COPYRIGHT
pushd clr-build-avx2
%make_install_avx2  || :
popd
pushd clr-build
%make_install
popd

%files
%defattr(-,root,root,-)
/usr/lib64/octave/5.1.0/site/oct/x86_64-generic-linux-gnu/nlopt_optimize.oct

%files data
%defattr(-,root,root,-)
/usr/share/octave/5.1.0/site/m/NLOPT_AUGLAG.m
/usr/share/octave/5.1.0/site/m/NLOPT_AUGLAG_EQ.m
/usr/share/octave/5.1.0/site/m/NLOPT_GD_MLSL.m
/usr/share/octave/5.1.0/site/m/NLOPT_GD_MLSL_LDS.m
/usr/share/octave/5.1.0/site/m/NLOPT_GD_STOGO.m
/usr/share/octave/5.1.0/site/m/NLOPT_GD_STOGO_RAND.m
/usr/share/octave/5.1.0/site/m/NLOPT_GN_CRS2_LM.m
/usr/share/octave/5.1.0/site/m/NLOPT_GN_DIRECT.m
/usr/share/octave/5.1.0/site/m/NLOPT_GN_DIRECT_L.m
/usr/share/octave/5.1.0/site/m/NLOPT_GN_DIRECT_L_NOSCAL.m
/usr/share/octave/5.1.0/site/m/NLOPT_GN_DIRECT_L_RAND.m
/usr/share/octave/5.1.0/site/m/NLOPT_GN_DIRECT_L_RAND_NOSCAL.m
/usr/share/octave/5.1.0/site/m/NLOPT_GN_DIRECT_NOSCAL.m
/usr/share/octave/5.1.0/site/m/NLOPT_GN_ESCH.m
/usr/share/octave/5.1.0/site/m/NLOPT_GN_ISRES.m
/usr/share/octave/5.1.0/site/m/NLOPT_GN_MLSL.m
/usr/share/octave/5.1.0/site/m/NLOPT_GN_MLSL_LDS.m
/usr/share/octave/5.1.0/site/m/NLOPT_GN_ORIG_DIRECT.m
/usr/share/octave/5.1.0/site/m/NLOPT_GN_ORIG_DIRECT_L.m
/usr/share/octave/5.1.0/site/m/NLOPT_G_MLSL.m
/usr/share/octave/5.1.0/site/m/NLOPT_G_MLSL_LDS.m
/usr/share/octave/5.1.0/site/m/NLOPT_LD_AUGLAG.m
/usr/share/octave/5.1.0/site/m/NLOPT_LD_AUGLAG_EQ.m
/usr/share/octave/5.1.0/site/m/NLOPT_LD_CCSAQ.m
/usr/share/octave/5.1.0/site/m/NLOPT_LD_LBFGS.m
/usr/share/octave/5.1.0/site/m/NLOPT_LD_LBFGS_NOCEDAL.m
/usr/share/octave/5.1.0/site/m/NLOPT_LD_MMA.m
/usr/share/octave/5.1.0/site/m/NLOPT_LD_SLSQP.m
/usr/share/octave/5.1.0/site/m/NLOPT_LD_TNEWTON.m
/usr/share/octave/5.1.0/site/m/NLOPT_LD_TNEWTON_PRECOND.m
/usr/share/octave/5.1.0/site/m/NLOPT_LD_TNEWTON_PRECOND_RESTART.m
/usr/share/octave/5.1.0/site/m/NLOPT_LD_TNEWTON_RESTART.m
/usr/share/octave/5.1.0/site/m/NLOPT_LD_VAR1.m
/usr/share/octave/5.1.0/site/m/NLOPT_LD_VAR2.m
/usr/share/octave/5.1.0/site/m/NLOPT_LN_AUGLAG.m
/usr/share/octave/5.1.0/site/m/NLOPT_LN_AUGLAG_EQ.m
/usr/share/octave/5.1.0/site/m/NLOPT_LN_BOBYQA.m
/usr/share/octave/5.1.0/site/m/NLOPT_LN_COBYLA.m
/usr/share/octave/5.1.0/site/m/NLOPT_LN_NELDERMEAD.m
/usr/share/octave/5.1.0/site/m/NLOPT_LN_NEWUOA.m
/usr/share/octave/5.1.0/site/m/NLOPT_LN_NEWUOA_BOUND.m
/usr/share/octave/5.1.0/site/m/NLOPT_LN_PRAXIS.m
/usr/share/octave/5.1.0/site/m/NLOPT_LN_SBPLX.m
/usr/share/octave/5.1.0/site/m/nlopt_minimize.m
/usr/share/octave/5.1.0/site/m/nlopt_minimize_constrained.m

%files dev
%defattr(-,root,root,-)
/usr/include/*.h
/usr/include/*.hpp
/usr/include/nlopt.f
/usr/lib64/cmake/nlopt/NLoptConfig.cmake
/usr/lib64/cmake/nlopt/NLoptConfigVersion.cmake
/usr/lib64/cmake/nlopt/NLoptLibraryDepends-relwithdebinfo.cmake
/usr/lib64/cmake/nlopt/NLoptLibraryDepends.cmake
/usr/lib64/haswell/libnlopt.so
/usr/lib64/libnlopt.so
/usr/lib64/pkgconfig/nlopt.pc
/usr/share/man/man3/nlopt.3
/usr/share/man/man3/nlopt_minimize.3
/usr/share/man/man3/nlopt_minimize_constrained.3

%files lib
%defattr(-,root,root,-)
/usr/lib64/haswell/libnlopt.so.0
/usr/lib64/haswell/libnlopt.so.0.10.0
/usr/lib64/libnlopt.so.0
/usr/lib64/libnlopt.so.0.10.0

%files license
%defattr(0644,root,root,0755)
/usr/share/package-licenses/nlopt/COPYING
/usr/share/package-licenses/nlopt/src_algs_ags_COPYRIGHT
/usr/share/package-licenses/nlopt/src_algs_bobyqa_COPYRIGHT
/usr/share/package-licenses/nlopt/src_algs_cobyla_COPYRIGHT
/usr/share/package-licenses/nlopt/src_algs_direct_COPYING
/usr/share/package-licenses/nlopt/src_algs_esch_COPYRIGHT
/usr/share/package-licenses/nlopt/src_algs_luksan_COPYRIGHT
/usr/share/package-licenses/nlopt/src_algs_newuoa_COPYRIGHT
/usr/share/package-licenses/nlopt/src_algs_slsqp_COPYRIGHT
/usr/share/package-licenses/nlopt/src_algs_stogo_COPYRIGHT
